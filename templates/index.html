{% extends 'base.html' %}
{% block content %}
<section class="hero is-fullheight-with-navbar gradient-hero">
  <div class="hero-body">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-10-tablet is-8-desktop is-10-widescreen">
          <div class="box glass animate__animated animate__fadeInUp has-background-black">
            <h1 class="title is-3 mb-4"><i class="fa-solid fa-wand-magic-sparkles"></i> Ask for a recipe</h1>
            {% if not has_api_key %}
              <article class="message is-warning">
                <div class="message-body">
                  Heads up! GOOGLE_API_KEY is not set. Add it to your .env to generate recipes.
                </div>
              </article>
            {% endif %}
            <form action="{{ url_for('generate') }}" method="POST">
              <div class="field">
                <label class="label">What would you like to cook?</label>
                <div class="control has-icons-left">
                  <input class="input is-medium has-background-black" type="text" name="recipe_prompt" id="recipe_prompt" placeholder="e.g., Creamy tomato basil pasta, high-protein vegetarian dinner, gluten-free brownies">
                  <span class="icon is-left"><i class="fa-solid fa-utensils"></i></span>
                </div>
              </div>

              <div class="field">
                <label class="label">Ingredients you already have (comma or newline separated)</label>
                <div class="control">
                  <textarea class="textarea has-background-black" name="available_ingredients" id="available_ingredients" rows="3" placeholder="e.g., tomato, basil, garlic, olive oil, pasta"></textarea>
                </div>
                <p class="help"><strong>Note:</strong> Fill at least one field above. We'll suggest a shopping list excluding ingredients you have.</p>
              </div>

              <div class="columns is-multiline">
                <div class="column is-4">
                  <label class="label">Servings</label>
                  <div class="control">
                    <input class="input has-background-black" type="number" name="servings" min="1" placeholder="2">
                  </div>
                </div>
                <div class="column is-4">
                  <label class="label">Cuisine</label>
                  <div class="control">
                    <div class="select is-fullwidth">
                      <select class="has-background-black" name="cuisine">
                        <option value="">Any</option>
                        <option>Mediterranean</option>
                        <option>Indian</option>
                        <option>Italian</option>
                        <option>Mexican</option>
                        <option>Chinese</option>
                        <option>Japanese</option>
                        <option>American</option>
                        <option>Middle Eastern</option>
                        <option>Thai</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="column is-4">
                  <label class="label">Time preference</label>
                  <div class="control">
                    <div class="select is-fullwidth">
                      <select class="has-background-black" name="time_pref">
                        <option value="No Preference">Any</option>
                        <option>Under 20 minutes</option>
                        <option>Under 40 minutes</option>
                        <option>Slow-cook acceptable</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <div class="field is-grouped is-grouped-right mt-4">
                <p class="control"><button class="button is-medium is-primary" id="generate-btn"><i class="fa-solid fa-bolt"></i>&nbsp;Generate</button></p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Loading Animation Overlay -->
<div id="loading-overlay" class="loading-overlay is-hidden">
  <div class="loading-content">
    <div class="chef-animation">
      <div class="chef-hat">
        <i class="fa-solid fa-hat-chef"></i>
      </div>
      <div class="cooking-items">
        <div class="cooking-item item-1"><i class="fa-solid fa-carrot"></i></div>
        <div class="cooking-item item-2"><i class="fa-solid fa-pepper-hot"></i></div>
        <div class="cooking-item item-3"><i class="fa-solid fa-fish"></i></div>
        <div class="cooking-item item-4"><i class="fa-solid fa-cheese"></i></div>
        <div class="cooking-item item-5"><i class="fa-solid fa-apple-whole"></i></div>
      </div>
      <div class="cooking-pot">
        <i class="fa-solid fa-pot-food"></i>
      </div>
    </div>
    <div class="loading-text">
      <h2 class="title is-4 has-text-white mb-2">Chef is cooking...</h2>
      <p class="subtitle is-6 has-text-white-bis">Creating your perfect recipe with AI magic!</p>
      <div class="loading-dots">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
    </div>
  </div>
</div>

{% endblock %}

